<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Poseidon.CLI.Chronicle</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Poseidon.Chronicle.html"><span class="hs-identifier">Poseidon.Chronicle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Poseidon.Chronicle.html#makeChronicle"><span class="hs-identifier">makeChronicle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Poseidon.Chronicle.html#readChronicle"><span class="hs-identifier">readChronicle</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>                                     </span><span class="annot"><a href="Poseidon.Chronicle.html#updateChronicle"><span class="hs-identifier">updateChronicle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Poseidon.Chronicle.html#writeChronicle"><span class="hs-identifier">writeChronicle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Poseidon.Package.html"><span class="hs-identifier">Poseidon.Package</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Poseidon.Package.html#PackageReadOptions"><span class="hs-identifier">PackageReadOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>                                     </span><span class="annot"><a href="Poseidon.Package.html#defaultPackageReadOptions"><span class="hs-identifier">defaultPackageReadOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>                                     </span><span class="annot"><a href="Poseidon.Package.html#readPoseidonPackageCollection"><span class="hs-identifier">readPoseidonPackageCollection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Poseidon.Utils.html"><span class="hs-identifier">Poseidon.Utils</span></a></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Poseidon.Utils.html#PoseidonIO"><span class="hs-identifier">PoseidonIO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">data</span><span> </span><span id="ChronicleOptions"><span class="annot"><a href="Poseidon.CLI.Chronicle.html#ChronicleOptions"><span class="hs-identifier hs-var">ChronicleOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ChronicleOptions"><span class="annot"><a href="Poseidon.CLI.Chronicle.html#ChronicleOptions"><span class="hs-identifier hs-var">ChronicleOptions</span></a></span></span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_chronicleBaseDirs"><span class="annot"><span class="annottext">ChronicleOptions -&gt; [FilePath]
</span><a href="Poseidon.CLI.Chronicle.html#_chronicleBaseDirs"><span class="hs-identifier hs-var hs-var">_chronicleBaseDirs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">]</span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_chronicleOperation"><span class="annot"><span class="annottext">ChronicleOptions -&gt; ChronOperation
</span><a href="Poseidon.CLI.Chronicle.html#_chronicleOperation"><span class="hs-identifier hs-var hs-var">_chronicleOperation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Poseidon.CLI.Chronicle.html#ChronOperation"><span class="hs-identifier hs-type">ChronOperation</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">data</span><span> </span><span id="ChronOperation"><span class="annot"><a href="Poseidon.CLI.Chronicle.html#ChronOperation"><span class="hs-identifier hs-var">ChronOperation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CreateChron"><span class="annot"><a href="Poseidon.CLI.Chronicle.html#CreateChron"><span class="hs-identifier hs-var">CreateChron</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="UpdateChron"><span class="annot"><a href="Poseidon.CLI.Chronicle.html#UpdateChron"><span class="hs-identifier hs-var">UpdateChron</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="annot"><a href="Poseidon.CLI.Chronicle.html#pacReadOpts"><span class="hs-identifier hs-type">pacReadOpts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Poseidon.Package.html#PackageReadOptions"><span class="hs-identifier hs-type">PackageReadOptions</span></a></span><span>
</span><span id="line-19"></span><span id="pacReadOpts"><span class="annot"><span class="annottext">pacReadOpts :: PackageReadOptions
</span><a href="Poseidon.CLI.Chronicle.html#pacReadOpts"><span class="hs-identifier hs-var hs-var">pacReadOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageReadOptions
</span><a href="Poseidon.Package.html#defaultPackageReadOptions"><span class="hs-identifier hs-var">defaultPackageReadOptions</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-20"></span><span>      </span><span class="annot"><span class="annottext">_readOptIgnoreChecksums :: Bool
</span><a href="Poseidon.Package.html#_readOptIgnoreChecksums"><span class="hs-identifier hs-var">_readOptIgnoreChecksums</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_readOptIgnoreGeno :: Bool
</span><a href="Poseidon.Package.html#_readOptIgnoreGeno"><span class="hs-identifier hs-var">_readOptIgnoreGeno</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_readOptGenoCheck :: Bool
</span><a href="Poseidon.Package.html#_readOptGenoCheck"><span class="hs-identifier hs-var">_readOptGenoCheck</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_readOptIgnorePosVersion :: Bool
</span><a href="Poseidon.Package.html#_readOptIgnorePosVersion"><span class="hs-identifier hs-var">_readOptIgnorePosVersion</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="annot"><a href="Poseidon.CLI.Chronicle.html#runChronicle"><span class="hs-identifier hs-type">runChronicle</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Poseidon.CLI.Chronicle.html#ChronicleOptions"><span class="hs-identifier hs-type">ChronicleOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Poseidon.Utils.html#PoseidonIO"><span class="hs-identifier hs-type">PoseidonIO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span id="runChronicle"><span class="annot"><span class="annottext">runChronicle :: ChronicleOptions -&gt; PoseidonIO ()
</span><a href="Poseidon.CLI.Chronicle.html#runChronicle"><span class="hs-identifier hs-var hs-var">runChronicle</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Poseidon.CLI.Chronicle.html#ChronicleOptions"><span class="hs-identifier hs-type">ChronicleOptions</span></a></span><span> </span><span id="local-6989586621679504094"><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679504094"><span class="hs-identifier hs-var">baseDirs</span></a></span></span><span> </span><span id="local-6989586621679504095"><span class="annot"><span class="annottext">ChronOperation
</span><a href="#local-6989586621679504095"><span class="hs-identifier hs-var">operation</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-28"></span><span>    </span><span id="local-6989586621679504096"><span class="annot"><span class="annottext">[PoseidonPackage]
</span><a href="#local-6989586621679504096"><span class="hs-identifier hs-var">allPackages</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PackageReadOptions -&gt; [FilePath] -&gt; PoseidonIO [PoseidonPackage]
</span><a href="Poseidon.Package.html#readPoseidonPackageCollection"><span class="hs-identifier hs-var">readPoseidonPackageCollection</span></a></span><span> </span><span class="annot"><span class="annottext">PackageReadOptions
</span><a href="Poseidon.CLI.Chronicle.html#pacReadOpts"><span class="hs-identifier hs-var">pacReadOpts</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679504094"><span class="hs-identifier hs-var">baseDirs</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ChronOperation
</span><a href="#local-6989586621679504095"><span class="hs-identifier hs-var">operation</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="Poseidon.CLI.Chronicle.html#CreateChron"><span class="hs-identifier hs-type">CreateChron</span></a></span><span> </span><span id="local-6989586621679504097"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679504097"><span class="hs-identifier hs-var">outPath</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-31"></span><span>            </span><span id="local-6989586621679504098"><span class="annot"><span class="annottext">PoseidonPackageChronicle
</span><a href="#local-6989586621679504098"><span class="hs-identifier hs-var">newChronicle</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath
-&gt; [PoseidonPackage] -&gt; PoseidonIO PoseidonPackageChronicle
</span><a href="Poseidon.Chronicle.html#makeChronicle"><span class="hs-identifier hs-var">makeChronicle</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679504097"><span class="hs-identifier hs-var">outPath</span></a></span><span> </span><span class="annot"><span class="annottext">[PoseidonPackage]
</span><a href="#local-6989586621679504096"><span class="hs-identifier hs-var">allPackages</span></a></span><span>
</span><span id="line-32"></span><span>            </span><span class="annot"><span class="annottext">FilePath -&gt; PoseidonPackageChronicle -&gt; PoseidonIO ()
</span><a href="Poseidon.Chronicle.html#writeChronicle"><span class="hs-identifier hs-var">writeChronicle</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679504097"><span class="hs-identifier hs-var">outPath</span></a></span><span> </span><span class="annot"><span class="annottext">PoseidonPackageChronicle
</span><a href="#local-6989586621679504098"><span class="hs-identifier hs-var">newChronicle</span></a></span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="Poseidon.CLI.Chronicle.html#UpdateChron"><span class="hs-identifier hs-type">UpdateChron</span></a></span><span> </span><span id="local-6989586621679504099"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679504099"><span class="hs-identifier hs-var">inPath</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-34"></span><span>            </span><span id="local-6989586621679504100"><span class="annot"><span class="annottext">PoseidonPackageChronicle
</span><a href="#local-6989586621679504100"><span class="hs-identifier hs-var">newChronicle</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath
-&gt; [PoseidonPackage] -&gt; PoseidonIO PoseidonPackageChronicle
</span><a href="Poseidon.Chronicle.html#makeChronicle"><span class="hs-identifier hs-var">makeChronicle</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679504099"><span class="hs-identifier hs-var">inPath</span></a></span><span> </span><span class="annot"><span class="annottext">[PoseidonPackage]
</span><a href="#local-6989586621679504096"><span class="hs-identifier hs-var">allPackages</span></a></span><span>
</span><span id="line-35"></span><span>            </span><span id="local-6989586621679504101"><span class="annot"><span class="annottext">PoseidonPackageChronicle
</span><a href="#local-6989586621679504101"><span class="hs-identifier hs-var">oldChronicle</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; PoseidonIO PoseidonPackageChronicle
</span><a href="Poseidon.Chronicle.html#readChronicle"><span class="hs-identifier hs-var">readChronicle</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679504099"><span class="hs-identifier hs-var">inPath</span></a></span><span>
</span><span id="line-36"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679504102"><span class="annot"><span class="annottext">updatedChronicle :: PoseidonPackageChronicle
</span><a href="#local-6989586621679504102"><span class="hs-identifier hs-var hs-var">updatedChronicle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PoseidonPackageChronicle
-&gt; PoseidonPackageChronicle -&gt; PoseidonPackageChronicle
</span><a href="Poseidon.Chronicle.html#updateChronicle"><span class="hs-identifier hs-var">updateChronicle</span></a></span><span> </span><span class="annot"><span class="annottext">PoseidonPackageChronicle
</span><a href="#local-6989586621679504101"><span class="hs-identifier hs-var">oldChronicle</span></a></span><span> </span><span class="annot"><span class="annottext">PoseidonPackageChronicle
</span><a href="#local-6989586621679504100"><span class="hs-identifier hs-var">newChronicle</span></a></span><span>
</span><span id="line-37"></span><span>            </span><span class="annot"><span class="annottext">FilePath -&gt; PoseidonPackageChronicle -&gt; PoseidonIO ()
</span><a href="Poseidon.Chronicle.html#writeChronicle"><span class="hs-identifier hs-var">writeChronicle</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679504099"><span class="hs-identifier hs-var">inPath</span></a></span><span> </span><span class="annot"><span class="annottext">PoseidonPackageChronicle
</span><a href="#local-6989586621679504102"><span class="hs-identifier hs-var">updatedChronicle</span></a></span><span>
</span><span id="line-38"></span></pre></body></html>